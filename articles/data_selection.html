<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="COINr">
<title>Data selection • COINr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Data selection">
<meta property="og:description" content="COINr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">COINr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.6</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/overview.html">Overview</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/v1.html">v1.0 updates</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-guides">Guides</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-guides">
    <h6 class="dropdown-header" data-toc-skip>Construction</h6>
    <a class="dropdown-item" href="../articles/coins.html">Building coins</a>
    <a class="dropdown-item" href="../articles/imputation.html">Imputation of missing data</a>
    <a class="dropdown-item" href="../articles/denomination.html">Denomination</a>
    <a class="dropdown-item" href="../articles/screening.html">Unit screening</a>
    <a class="dropdown-item" href="../articles/treat.html">Outlier treatment</a>
    <a class="dropdown-item" href="../articles/normalise.html">Normalisation</a>
    <a class="dropdown-item" href="../articles/weights.html">Weighting</a>
    <a class="dropdown-item" href="../articles/aggregate.html">Aggregation</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Post-processing</h6>
    <a class="dropdown-item" href="../articles/visualisation.html">Visualisation</a>
    <a class="dropdown-item" href="../articles/analysis.html">Statistical analysis</a>
    <a class="dropdown-item" href="../articles/results.html">Presenting results</a>
    <a class="dropdown-item" href="../articles/adjustments.html">Adjustments and comparisons</a>
    <a class="dropdown-item" href="../articles/sensitivity.html">Sensitivity analysis</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Other</h6>
    <a class="dropdown-item" href="../articles/data_selection.html">Data selection</a>
    <a class="dropdown-item" href="../articles/other_functions.html">Other functions</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/bluefoxr/COINr/">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Data selection</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/bluefoxr/COINr/blob/HEAD/vignettes/data_selection.Rmd" class="external-link"><code>vignettes/data_selection.Rmd</code></a></small>
      <div class="d-none name"><code>data_selection.Rmd</code></div>
    </div>

    
    
<p>This vignette describes how to retrieve data from a coin. The main
functions to do this are <code><a href="../reference/get_dset.html">get_dset()</a></code> and the more flexible
<code><a href="../reference/get_data.html">get_data()</a></code>.</p>
<p>These functions are important to understand, because many COINr
functions use them to retrieve data for plotting, analysis and other
functions. Both functions are <em>generics</em>, which means that they
have methods for coins and purses.</p>
<div class="section level2">
<h2 id="data-sets">Data sets<a class="anchor" aria-label="anchor" href="#data-sets"></a>
</h2>
<p>Every time a “building” operation is applied to a coin, such as
<code><a href="../reference/Treat.html">Treat()</a></code>, <code><a href="../reference/Screen.html">Screen()</a></code>, <code><a href="../reference/Normalise.html">Normalise()</a></code>
and so on, a new data set is created. Data sets live in the
<code>.$Data</code> sub-list of the coin. We can retrieve a data set at
any time using the <code><a href="../reference/get_data.html">get_data()</a></code> function:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bluefoxr.github.io/COINr/">COINr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># build full example coin</span></span>
<span><span class="va">coin</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_example_coin.html">build_example_coin</a></span><span class="op">(</span>quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># retrieve normalised data set</span></span>
<span><span class="va">dset_norm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_dset.html">get_dset</a></span><span class="op">(</span><span class="va">coin</span>, dset <span class="op">=</span> <span class="st">"Normalised"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># view first few rows and cols</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dset_norm</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt;   uCode      LPI    Flights     Ship      Bord</span></span>
<span><span class="co">#&gt; 1   AUS 79.96112 12.3223217 66.14497   0.00000</span></span>
<span><span class="co">#&gt; 2   AUT 94.07137 27.8763185  0.00000  42.01269</span></span>
<span><span class="co">#&gt; 3   BEL 94.56023 23.3967426 97.14314 100.00000</span></span>
<span><span class="co">#&gt; 4   BGD 27.63906  0.1243185 45.80661  10.85013</span></span>
<span><span class="co">#&gt; 5   BGR 34.29965 10.8828790 37.40495  16.34359</span></span></code></pre></div>
<p>By default, a data set in the coin consists of indicator columns plus
the “uCode” column, which is the unique identifier of each row. You can
also ask to attach unit metadata columns, such as unit names, groups,
and anything else that was input when building the coin, using the
<code>also_get</code> argument:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># retrieve normalised data set</span></span>
<span><span class="va">dset_norm2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_dset.html">get_dset</a></span><span class="op">(</span><span class="va">coin</span>, dset <span class="op">=</span> <span class="st">"Normalised"</span>, also_get <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"uName"</span>, <span class="st">"GDP_group"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># view first few rows and cols</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dset_norm2</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt;   uCode      uName GDP_group      LPI    Flights</span></span>
<span><span class="co">#&gt; 1   AUS  Australia        XL 79.96112 12.3223217</span></span>
<span><span class="co">#&gt; 2   AUT    Austria         L 94.07137 27.8763185</span></span>
<span><span class="co">#&gt; 3   BEL    Belgium         L 94.56023 23.3967426</span></span>
<span><span class="co">#&gt; 4   BGD Bangladesh         M 27.63906  0.1243185</span></span>
<span><span class="co">#&gt; 5   BGR   Bulgaria         S 34.29965 10.8828790</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data-subsets">Data subsets<a class="anchor" aria-label="anchor" href="#data-subsets"></a>
</h2>
<p>While <code><a href="../reference/get_dset.html">get_dset()</a></code> is a quick way to retrieve an entire
data set and metadata, the <code><a href="../reference/get_data.html">get_data()</a></code> function is a
generalisation: it can also be used to obtain a whole data set, but also
subsets of data, based on e.g. indicator selection and grouping
(columns), as well as unit selection and grouping (rows).</p>
<div class="section level3">
<h3 id="indicatorscolumns">Indicators/columns<a class="anchor" aria-label="anchor" href="#indicatorscolumns"></a>
</h3>
<p>A simple example is to extract one or more named indicators from a
target data set:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span><span class="va">coin</span>, dset <span class="op">=</span> <span class="st">"Raw"</span>, iCodes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Flights"</span>, <span class="st">"LPI"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># see first few rows</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt;    uCode  Flights      LPI</span></span>
<span><span class="co">#&gt; 31   AUS 36.05498 3.793385</span></span>
<span><span class="co">#&gt; 1    AUT 29.01725 4.097985</span></span>
<span><span class="co">#&gt; 2    BEL 31.88546 4.108538</span></span>
<span><span class="co">#&gt; 32   BGD  4.27955 2.663902</span></span>
<span><span class="co">#&gt; 3    BGR  9.23588 2.807685</span></span></code></pre></div>
<p>By default, <code><a href="../reference/get_data.html">get_data()</a></code> returns the requested indicators,
plus the <code>uCode</code> identifier column. We can also set
<code>also_get = "none"</code> to return only the indicator columns.</p>
<p>The <code>iCode</code> argument can also accept groups of indicators,
based on the structure of the index. In our example, indicators are
aggregated into “pillars” (level 2) within groups. We can name an
aggregation group and extract the underlying indicators:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span><span class="va">coin</span>, dset <span class="op">=</span> <span class="st">"Raw"</span>, iCodes <span class="op">=</span> <span class="st">"Political"</span>, Level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt;    uCode Embs IGOs   UNVote</span></span>
<span><span class="co">#&gt; 31   AUS   82  196 38.46245</span></span>
<span><span class="co">#&gt; 1    AUT   88  227 42.63920</span></span>
<span><span class="co">#&gt; 2    BEL   84  248 43.00308</span></span>
<span><span class="co">#&gt; 32   BGD   52  145 38.60601</span></span>
<span><span class="co">#&gt; 3    BGR   67  209 42.95986</span></span></code></pre></div>
<p>Here we have requested all the indicators in level 1 (the indicator
level), that belong to the group called “Political” (one of the
pillars). Specifying the level becomes more relevant when we look at the
aggregated data set, which also includes the pillar, sub-index and index
scores. Here, for example, we can ask for all the pillar scores (level
2) which belong to the sustainability sub-index (level 3):</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span><span class="va">coin</span>, dset <span class="op">=</span> <span class="st">"Aggregated"</span>, iCodes <span class="op">=</span> <span class="st">"Sust"</span>, Level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt;   uCode  Environ   Social SusEcFin</span></span>
<span><span class="co">#&gt; 1   AUS 31.92211 71.88108 55.69987</span></span>
<span><span class="co">#&gt; 2   AUT 69.47511 72.76415 62.88150</span></span>
<span><span class="co">#&gt; 3   BEL 53.00859 86.16783 50.09020</span></span>
<span><span class="co">#&gt; 4   BGD 81.66988 27.51138 64.58884</span></span>
<span><span class="co">#&gt; 5   BGR 55.69922 53.30489 61.68677</span></span></code></pre></div>
<p>If this isn’t clear, look at the structure of the example index using
e.g. <code>plot_framework(coin)</code>. If we wanted to select all the
indicators within the “Sust” sub-index we would set
<code>Level = 1</code>. If we wanted to select the sub-index scores
themselves we would set <code>Level = 3</code>, and so on.</p>
<p>The idea of selecting indicators and aggregates based on the
structure of the index is useful in many places in COINr, for example
examining correlations within aggregation groups using
<code><a href="../reference/plot_corr.html">plot_corr()</a></code>.</p>
</div>
<div class="section level3">
<h3 id="unitsrows">Units/rows<a class="anchor" aria-label="anchor" href="#unitsrows"></a>
</h3>
<p>Units (rows) of the data set can also be selected (also in
combination with selecting indicators). Starting with a simple example,
let’s select specified units for a specific indicator:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span><span class="va">coin</span>, dset <span class="op">=</span> <span class="st">"Raw"</span>, iCodes <span class="op">=</span> <span class="st">"Goods"</span>, uCodes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AUT"</span>, <span class="st">"VNM"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    uCode    Goods</span></span>
<span><span class="co">#&gt; 1    AUT 278.4264</span></span>
<span><span class="co">#&gt; 51   VNM 269.0766</span></span></code></pre></div>
<p>Rows can also be sub-setted using groups, i.e. unit groupings that
are defined using variables input with <code>iMeta$Type = "Group"</code>
when building the coin. Recall that for our example coin we have several
groups (a reminder that you can see some details about the coin using
its print method):</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">coin</span></span>
<span><span class="co">#&gt; --------------</span></span>
<span><span class="co">#&gt; A coin with...</span></span>
<span><span class="co">#&gt; --------------</span></span>
<span><span class="co">#&gt; Input:</span></span>
<span><span class="co">#&gt;   Units: 51 (AUS, AUT, BEL, ...)</span></span>
<span><span class="co">#&gt;   Indicators: 49 (Goods, Services, FDI, ...)</span></span>
<span><span class="co">#&gt;   Denominators: 4 (Area, Energy, GDP, ...)</span></span>
<span><span class="co">#&gt;   Groups: 4 (GDP_group, GDPpc_group, Pop_group, ...)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Structure:</span></span>
<span><span class="co">#&gt;   Level 1 Indicator: 49 indicators (FDI, ForPort, Goods, ...) </span></span>
<span><span class="co">#&gt;   Level 2 Pillar: 8 groups (ConEcFin, Instit, P2P, ...) </span></span>
<span><span class="co">#&gt;   Level 3 Sub-index: 2 groups (Conn, Sust) </span></span>
<span><span class="co">#&gt;   Level 4 Index: 1 groups (Index) </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Data sets:</span></span>
<span><span class="co">#&gt;   Raw (51 units)</span></span>
<span><span class="co">#&gt;   Denominated (51 units)</span></span>
<span><span class="co">#&gt;   Imputed (51 units)</span></span>
<span><span class="co">#&gt;   Screened (51 units)</span></span>
<span><span class="co">#&gt;   Treated (51 units)</span></span>
<span><span class="co">#&gt;   Normalised (51 units)</span></span>
<span><span class="co">#&gt;   Aggregated (51 units)</span></span></code></pre></div>
<p>The first way to subset by unit group is to name a grouping variable,
and a group within that variable to select. For example, say we want to
know the values of the “Goods” indicator for all the countries in the
“XL” GDP group:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span><span class="va">coin</span>, dset <span class="op">=</span> <span class="st">"Raw"</span>, iCodes <span class="op">=</span> <span class="st">"Goods"</span>, use_group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>GDP_group <span class="op">=</span> <span class="st">"XL"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    uCode GDP_group     Goods</span></span>
<span><span class="co">#&gt; 1    AUS        XL  288.4893</span></span>
<span><span class="co">#&gt; 8    CHN        XL 1713.6190</span></span>
<span><span class="co">#&gt; 11   DEU        XL 1919.1940</span></span>
<span><span class="co">#&gt; 13   ESP        XL  447.1229</span></span>
<span><span class="co">#&gt; 16   FRA        XL  849.3303</span></span>
<span><span class="co">#&gt; 17   GBR        XL  778.9052</span></span>
<span><span class="co">#&gt; 21   IDN        XL  222.4186</span></span>
<span><span class="co">#&gt; 22   IND        XL  288.9806</span></span>
<span><span class="co">#&gt; 24   ITA        XL  658.1981</span></span>
<span><span class="co">#&gt; 25   JPN        XL  732.2078</span></span>
<span><span class="co">#&gt; 28   KOR        XL  568.9920</span></span>
<span><span class="co">#&gt; 45   RUS        XL  343.8504</span></span></code></pre></div>
<p>Since we have subsetted by group, this also returns the group column
which was used.</p>
<p>Another way of sub-setting is to combine <code>uCodes</code> and
<code>use_group</code>. When these two arguments are both specified, the
result is to return the full group(s) to which the specified
<code>uCodes</code> belong. This can be used to put a unit in context
with its peers within a group. For example, we might want to see the
values of the “Flights” indicator for a specific unit, as well as all
other units within the same population group:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span><span class="va">coin</span>, dset <span class="op">=</span> <span class="st">"Raw"</span>, iCodes <span class="op">=</span> <span class="st">"Flights"</span>, uCodes <span class="op">=</span> <span class="st">"MLT"</span>, use_group <span class="op">=</span> <span class="st">"Pop_group"</span><span class="op">)</span></span>
<span><span class="co">#&gt;    uCode Pop_group  Flights</span></span>
<span><span class="co">#&gt; 6    BRN         S  2.01900</span></span>
<span><span class="co">#&gt; 9    CYP         S  8.75467</span></span>
<span><span class="co">#&gt; 14   EST         S  3.12946</span></span>
<span><span class="co">#&gt; 19   HRV         S  9.24529</span></span>
<span><span class="co">#&gt; 23   IRL         S 34.17721</span></span>
<span><span class="co">#&gt; 30   LTU         S  5.37919</span></span>
<span><span class="co">#&gt; 31   LUX         S  4.84458</span></span>
<span><span class="co">#&gt; 32   LVA         S  6.77976</span></span>
<span><span class="co">#&gt; 33   MLT         S  6.75251</span></span>
<span><span class="co">#&gt; 35   MNG         S  0.98951</span></span>
<span><span class="co">#&gt; 38   NOR         S 25.64994</span></span>
<span><span class="co">#&gt; 39   NZL         S 13.37242</span></span>
<span><span class="co">#&gt; 48   SVN         S  1.51736</span></span></code></pre></div>
<p>Here, we have to specify <code>use_group</code> simply as a string
rather than a list. Since MLT is in the “S” population group, it returns
all units within that group.</p>
<p>Overall, the idea of <code><a href="../reference/get_data.html">get_data()</a></code> is to flexibly return
subsets of indicator data, based on the structure of the index and unit
groups.</p>
</div>
</div>
<div class="section level2">
<h2 id="manual-selection">Manual selection<a class="anchor" aria-label="anchor" href="#manual-selection"></a>
</h2>
<p>As a final point, it’s worth pointing out that a coin is simply a
list of R objects such as data frames, other lists, vectors and so on.
It has a particular format which allows things to be easily accessed by
COINr functions. But other than that, its an ordinary R object. This
means that even without the helper functions mentioned, you can get at
the data simply by exploring the coin yourself.</p>
<p>The data sets live in the <code>.$Data</code> sub-list of the
coin:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">coin</span><span class="op">$</span><span class="va">Data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Raw"         "Denominated" "Imputed"     "Screened"    "Treated"    </span></span>
<span><span class="co">#&gt; [6] "Normalised"  "Aggregated"</span></span></code></pre></div>
<p>And we can access any of these directly:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_raw</span> <span class="op">&lt;-</span> <span class="va">coin</span><span class="op">$</span><span class="va">Data</span><span class="op">$</span><span class="va">Raw</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data_raw</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt;    uCode      LPI  Flights      Ship Bord</span></span>
<span><span class="co">#&gt; 31   AUS 3.793385 36.05498 14.004198    0</span></span>
<span><span class="co">#&gt; 1    AUT 4.097985 29.01725  0.000000   35</span></span>
<span><span class="co">#&gt; 2    BEL 4.108538 31.88546 20.567121   48</span></span>
<span><span class="co">#&gt; 32   BGD 2.663902  4.27955  9.698165   16</span></span>
<span><span class="co">#&gt; 3    BGR 2.807685  9.23588  7.919366   18</span></span></code></pre></div>
<p>The metadata lives in the <code>.$Meta</code> sub-list. For example,
the unit metadata, which includes groups, names etc:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">coin</span><span class="op">$</span><span class="va">Meta</span><span class="op">$</span><span class="va">Unit</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    51 obs. of  11 variables:</span></span>
<span><span class="co">#&gt;  $ uCode        : chr  "AUS" "AUT" "BEL" "BGD" ...</span></span>
<span><span class="co">#&gt;  $ uName        : chr  "Australia" "Austria" "Belgium" "Bangladesh" ...</span></span>
<span><span class="co">#&gt;  $ GDP_group    : chr  "XL" "L" "L" "M" ...</span></span>
<span><span class="co">#&gt;  $ GDPpc_group  : chr  "XL" "XL" "L" "S" ...</span></span>
<span><span class="co">#&gt;  $ Pop_group    : chr  "L" "M" "L" "XL" ...</span></span>
<span><span class="co">#&gt;  $ EurAsia_group: chr  "Asia" "Europe" "Europe" "Asia" ...</span></span>
<span><span class="co">#&gt;  $ Time         : num  2018 2018 2018 2018 2018 ...</span></span>
<span><span class="co">#&gt;  $ Area         : num  7741220 83871 30528 148460 110879 ...</span></span>
<span><span class="co">#&gt;  $ Energy       : num  81.3 27 41.83 27.92 9.96 ...</span></span>
<span><span class="co">#&gt;  $ GDP          : num  1304.5 390.8 468 220.8 53.2 ...</span></span>
<span><span class="co">#&gt;  $ Population   : num  24451 8735 11429 164670 7085 ...</span></span></code></pre></div>
<p>The point is that if COINr tools don’t get you where you want to go,
knowing your way around the coin allows you to access the data exactly
how you want.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="http://www.willbecker.me" class="external-link">William Becker</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
