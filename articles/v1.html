<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="COINr">
<title>Changes from COINr v1.0.0 • COINr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changes from COINr v1.0.0">
<meta property="og:description" content="COINr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">COINr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/overview.html">Overview</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/v1.html">v1.0 updates</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-guides">Guides</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-guides">
    <h6 class="dropdown-header" data-toc-skip>Construction</h6>
    <a class="dropdown-item" href="../articles/coins.html">Building coins</a>
    <a class="dropdown-item" href="../articles/imputation.html">Imputation of missing data</a>
    <a class="dropdown-item" href="../articles/denomination.html">Denomination</a>
    <a class="dropdown-item" href="../articles/screening.html">Unit screening</a>
    <a class="dropdown-item" href="../articles/treat.html">Outlier treatment</a>
    <a class="dropdown-item" href="../articles/normalise.html">Normalisation</a>
    <a class="dropdown-item" href="../articles/weights.html">Weighting</a>
    <a class="dropdown-item" href="../articles/aggregate.html">Aggregation</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Post-processing</h6>
    <a class="dropdown-item" href="../articles/visualisation.html">Visualisation</a>
    <a class="dropdown-item" href="../articles/analysis.html">Statistical analysis</a>
    <a class="dropdown-item" href="../articles/results.html">Presenting results</a>
    <a class="dropdown-item" href="../articles/adjustments.html">Adjustments and comparisons</a>
    <a class="dropdown-item" href="../articles/sensitivity.html">Sensitivity analysis</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Other</h6>
    <a class="dropdown-item" href="../articles/data_selection.html">Data selection</a>
    <a class="dropdown-item" href="../articles/other_functions.html">Other functions</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/bluefoxr/COINr/">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Changes from COINr v1.0.0</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/bluefoxr/COINr/blob/HEAD/vignettes/v1.Rmd" class="external-link"><code>vignettes/v1.Rmd</code></a></small>
      <div class="d-none name"><code>v1.Rmd</code></div>
    </div>

    
    
<p>If you were using COINr prior to v.1.0 you may have updated the
package and found that code calling COINr functions no longer works!
What is going on?</p>
<p>COINr has undergone some major changes and most of the syntax has
changed. So major that I skipped directly from v0.6 to v1.0 without any
intermediate steps. First of all, if you were using COINr previously, I
would like to say SORRY for any inconvenience caused by these changes.
However, the changes are worth it, and this is a one-off thing - I won’t
be doing a seismic change like this again.</p>
<p>This vignette helps you to transition from COINr 0.6.x to 1.0 and
explains what has happened. In short, most function names have changed,
the package is more robust and flexible, panel data is more supported,
interactive plots have been moved to a separate package available on
GitHub, and if you don’t like all this you can install the archive
version of the package called “COINr6” and everything will go back to
how it was. Let’s go through these things one by one.</p>
<div class="section level2">
<h2 id="why">Why<a class="anchor" aria-label="anchor" href="#why"></a>
</h2>
<p>If you just want to know what has changed and how to deal with it,
skip this section. If you want to know why things have changed, read
on.</p>
<p>The short story is that I found quite a few flaws in the package
which I was not happy with, given that it is in the public domain. I
decided to address these flaws in one giant revision, rather than a long
series of updates. I’ll explain each of these points here below.</p>
<div class="section level3">
<h3 id="robustness-and-efficiency">Robustness and efficiency<a class="anchor" aria-label="anchor" href="#robustness-and-efficiency"></a>
</h3>
<p>COINr was the first CRAN package that I built (everyone say “aww”).
In the process, I learned a lot about package development, as well as
principles about programming in general. However, since I learned this
while building the package, especially the first parts of the package
that I wrote were (in retrospect) not written very well. For example,
although I defined a “COIN” class, I didn’t define methods for the COIN.
Much of the code was not written in a “functional” way, and there were
not enough checks on the inputs and outputs of the code. All this meant
that the code was not very robust and had to be patched, a lot. This
made it hard to maintain, less robust, and also slower for the user. As
a consequence, I decided to re-write most functions, many from scratch,
with a higher standard of programming. I also slimmed down the “COIN”
class to a more streamlined “coin” class.</p>
</div>
<div class="section level3">
<h3 id="focus">Focus<a class="anchor" aria-label="anchor" href="#focus"></a>
</h3>
<p>COINr is a package meant to focus on developing composite indicators.
But the focus got lost at some point when I got carried away with html
plotly plots and shiny apps. These things, although nice, were in
retrospect not really that useful in the package and are also difficult
to maintain and bloat out the package. I decided to cut out all
interactive plots and apps, but these can still be accessed through the
COINr6 package and the conversion functions between COINr and COINr6
(see below).</p>
</div>
<div class="section level3">
<h3 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h3>
<p>As a result of the first two points (inexperience plus straying off
track), COINr had many dependencies, i.e. packages that had to be
installed to install COINr. Although there is no harm in loading 10 or
20 packages when performing data analysis in R, this can become a
problem if you are building a package because every user has to have
these packages installed. If you have ever had to install several
packages at the same time in R, you have probably run into some kind of
problem. Moreover, COINr is dependent on any changes in those packages,
and that makes maintaining it more difficult. This meant that in
practice, COINr was not always easy to install. I decided to re-write
the package almost entirely in base R, to remove as many dependencies as
possible.</p>
</div>
<div class="section level3">
<h3 id="features-and-flexibility">Features and flexibility<a class="anchor" aria-label="anchor" href="#features-and-flexibility"></a>
</h3>
<p>One thing that was missing from COINr was proper support for panel
data (time-dependent data). This has now been mostly rectified with the
introduction of the “purse” class. The main “building” functions of
COINr have also been re-written as generics, with methods for coins,
data frames and purses. Moreover many functions allow you to call other
functions, which makes COINr much easier to link up with other
packages.</p>
</div>
<div class="section level3">
<h3 id="syntax">Syntax<a class="anchor" aria-label="anchor" href="#syntax"></a>
</h3>
<p>COINr syntax was inconsistent. While this was not a critical problem,
since I was making big changes to the package I decided to take the
opportunity to make the syntax as consistent as possible. This is a
one-off change and won’t be messed around with any more!</p>
</div>
</div>
<div class="section level2">
<h2 id="whats-changed">What’s changed?<a class="anchor" aria-label="anchor" href="#whats-changed"></a>
</h2>
<div class="section level3">
<h3 id="function-names">Function names<a class="anchor" aria-label="anchor" href="#function-names"></a>
</h3>
<p>Many things have changed. The first thing you will probably notice is
the syntax. Because I was anyway making syntax-breaking changes to the
package, I decided to go all in, and try to make the syntax as
consistent as possible. This means that function names are more
predictable: all “building” functions start with a capital letter. Plot
functions start with <code>plot_</code>. Analysis functions mostly start
with <code>get_</code>. Functions are generally in lower case. This all
hopefully makes the package a little easier to use. You will notice that
calling an old &lt; v1.0 function name will generate an error, which
redirects you to the new function name. My hope is that although this is
inconvenient, it will not take too long to adapt to the new function
names. In most functions, the main logic behind the arguments is pretty
similar. As mentioned above, I’m not going to change all the names
again; this is a one-off thing.</p>
</div>
<div class="section level3">
<h3 id="function-features">Function features<a class="anchor" aria-label="anchor" href="#function-features"></a>
</h3>
<p>The second obvious change is that some of the key functions
themselves have changed syntax: they have been re-written to be more
flexible and more robust. This may seem annoying but I promise you it is
for the greater good. I can’t describe all the changes here, but in
general functions have been made more flexible: for example
<code><a href="../reference/Normalise.html">Normalise()</a></code> now can take any normalising function, rather
than a fixed set of options. Outlier treatment also allows to pass
outlier detection and treatment functions. The sensitivity analysis
function (now <code><a href="../reference/get_sensitivity.html">get_sensitivity()</a></code>) now allows to target any
part of the coin at all, not just function arguments. In general, the
core “building” functions now call other lower-level functions and this
makes it easier to hook COINr up to other packages, for example using
more sophisticated imputation and aggregation methods.</p>
</div>
<div class="section level3">
<h3 id="new-coin-class-and-methods">New “coin” class and methods<a class="anchor" aria-label="anchor" href="#new-coin-class-and-methods"></a>
</h3>
<p>The third related change that is perhaps not so obvious is that the
structure of the central object in COINr, the “COIN”, has changed. The
object has been streamlined and tidied, and has a new S3 class called a
“coin” (the difference being that the new coin is lower case). If you
have previously built a COIN using an older version of COINr, it will
not work in the new version of COINr! But the good news is that there is
a handy function called <code><a href="../reference/COIN_to_coin.html">COIN_to_coin()</a></code> which converts the
older “COIN” class to the newer “coin” class.</p>
<p>The new “coin” class also comes with a number of methods. All the
main construction functions now have methods for at least coins, data
frames and purses (see next sub-section), and some have methods for
numerical vectors. This is in contrast to the older COINr versions which
did not define formal methods. See the <a href="coins.html">Building
coins</a> vignette for more details.</p>
</div>
<div class="section level3">
<h3 id="purses-and-panel-data">Purses and panel data<a class="anchor" aria-label="anchor" href="#purses-and-panel-data"></a>
</h3>
<p>The new “purse” class gives a formal way to deal with panel data
(time indexed data). A “purse” is a time-indexed collection of coins.
All construction functions have purse methods, so working with time data
becomes very straightforward.</p>
<p>Purses and purse methods are still being expanded in COINr so keep an
eye out for new features if you are interested. See the <a href="coins.html">Building coins</a> vignette for more details.</p>
</div>
<div class="section level3">
<h3 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h3>
<p>The next thing is that the documentation has been completely
re-written, with loads of new vignettes! And even better, COINr now
lives at a web-page built with “pkgdown” which you can find <a href="https://bluefoxr.github.io/COINr/">here</a>, where all the
documentation is easily accessible. So each function is well-documented.
Hurray.</p>
</div>
<div class="section level3">
<h3 id="removed-functions">Removed functions<a class="anchor" aria-label="anchor" href="#removed-functions"></a>
</h3>
<p>The last very obvious change is that some functions have disappeared!
Where have they gone? You may notice that all functions that generated
interactive plots (often called <code>iPlot*</code> in previous versions
of COINr), plus all shiny apps, have vanished. The reason for this, as
explained above, is that these tools were distracting from the main
point of the package and were too much effort to maintain. Moreover,
even though interactive plots are great if you are outputting html
documents, for pdf and word they are a hassle because it is quite
unpredictable how they will be rendered. The good news is that I have
replaced some of the interactive plots with static versions, such as
<code><a href="../reference/plot_framework.html">plot_framework()</a></code>, and <code><a href="../reference/plot_scatter.html">plot_scatter()</a></code>, so you
can still do most of the plotting as in the previous versions, but with
more predictable (and more usable) outputs.</p>
</div>
</div>
<div class="section level2">
<h2 id="coinr6-i-want-out">COINr6: I want out!<a class="anchor" aria-label="anchor" href="#coinr6-i-want-out"></a>
</h2>
<p>If this level of upheaval is all a bit too much, and you’d like to go
back to how things were before, you have two options. The easiest
“roll-back” option is to install the “COINr6” package. COINr6 is the
latest version of COINr <em>before</em> the major syntax changes. This
means that if you wrote some scripts or markdown files in the old
syntax, instead of loading COINr, install and load COINr6, and this will
run as before.</p>
<p>The advantage of this is that you can have COINr (new syntax) and
COINr6 (old syntax) both installed at the same time.</p>
<p>To install COINr6 you have to install it from GitHub. First, make
sure you have the “remotes” package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install remotes package if you don't have it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span></code></pre></div>
<p>Now install COINr6 from the GitHub repo:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"bluefoxr/COINr6"</span><span class="op">)</span></span></code></pre></div>
<p>And that’s it. I will continue to lightly maintain this package for a
while (e.g. fixing any critical bugs if any arise) but in general the
main focus will be on the new COINr version.</p>
<p>Another way to roll back COINr to an older version is to use
<code>devtools::install_version()</code>, in which you can specify a
version number of any package to install. This might be a bit more
fiddly, and personally I would recommend to rather install COINr6. But
if you want, check out <a href="https://support.posit.co/hc/en-us/articles/219949047-Installing-older-versions-of-packages" class="external-link">this
article</a> for some info on installing older package versions.</p>
<p>COINr and COINr6 have conversion functions: in COINr there is the
<code><a href="../reference/COIN_to_coin.html">COIN_to_coin()</a></code> function which allows conversion from the
older “COIN” class to the newer “coin” class. In COINr6 there is also
now the reverse function, <code>coin_to_COIN()</code>, which allows
access to all the old interactive plotting of COINr6 if you liked that,
as well as the apps. Note that conversion comes with some limitations in
both directions, which are discussed in those functions’
documentation.</p>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>In summary, COINr has changed quite a lot, but that is a Good Thing.
If you do want to roll back, or have both old and new syntax side by
side, install COINr6.</p>
<p>As usual, if you have any feedback, spot any bugs or have any
suggestions, email me or <a href="https://github.com/bluefoxr/COINr/issues" class="external-link">open an issue</a> in the
GitHub repo.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="http://www.willbecker.me" class="external-link">William Becker</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
