<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compare two coins by correlation — compare_coins_corr • COINr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compare two coins by correlation — compare_coins_corr"><meta name="description" content='Given two coins, this function returns the correlation between the two coins,
for target datset dset and target indicator code(s) iCodes. Correlation
is calculated as the Pearson correlation coefficient, but if compare_by = "Ranks"
then this is the correlation coefficient of the ranks, which amounts to the
Spearman rank correlation. Set compare_by = "Scores" to return the Pearson
correlation between scores.'><meta property="og:description" content='Given two coins, this function returns the correlation between the two coins,
for target datset dset and target indicator code(s) iCodes. Correlation
is calculated as the Pearson correlation coefficient, but if compare_by = "Ranks"
then this is the correlation coefficient of the ranks, which amounts to the
Spearman rank correlation. Set compare_by = "Scores" to return the Pearson
correlation between scores.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">COINr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.14</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/overview.html">Overview</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/v1.html">v1.0 updates</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-guides" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Guides</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-guides"><li><h6 class="dropdown-header" data-toc-skip>Construction</h6></li>
    <li><a class="dropdown-item" href="../articles/coins.html">Building coins</a></li>
    <li><a class="dropdown-item" href="../articles/imputation.html">Imputation of missing data</a></li>
    <li><a class="dropdown-item" href="../articles/denomination.html">Denomination</a></li>
    <li><a class="dropdown-item" href="../articles/screening.html">Unit screening</a></li>
    <li><a class="dropdown-item" href="../articles/treat.html">Outlier treatment</a></li>
    <li><a class="dropdown-item" href="../articles/normalise.html">Normalisation</a></li>
    <li><a class="dropdown-item" href="../articles/weights.html">Weighting</a></li>
    <li><a class="dropdown-item" href="../articles/aggregate.html">Aggregation</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Post-processing</h6></li>
    <li><a class="dropdown-item" href="../articles/visualisation.html">Visualisation</a></li>
    <li><a class="dropdown-item" href="../articles/analysis.html">Statistical analysis</a></li>
    <li><a class="dropdown-item" href="../articles/results.html">Presenting results</a></li>
    <li><a class="dropdown-item" href="../articles/adjustments.html">Adjustments and comparisons</a></li>
    <li><a class="dropdown-item" href="../articles/sensitivity.html">Sensitivity analysis</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other</h6></li>
    <li><a class="dropdown-item" href="../articles/data_selection.html">Data selection</a></li>
    <li><a class="dropdown-item" href="../articles/other_functions.html">Other functions</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/bluefoxr/COINr/"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compare two coins by correlation</h1>
      <small class="dont-index">Source: <a href="https://github.com/bluefoxr/COINr/blob/master/R/compare.R" class="external-link"><code>R/compare.R</code></a></small>
      <div class="d-none name"><code>compare_coins_corr.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Given two coins, this function returns the correlation between the two coins,
for target datset <code>dset</code> and target indicator code(s) <code>iCodes</code>. Correlation
is calculated as the Pearson correlation coefficient, but if <code>compare_by = "Ranks"</code>
then this is the correlation coefficient of the ranks, which amounts to the
Spearman rank correlation. Set <code>compare_by = "Scores"</code> to return the Pearson
correlation between scores.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">compare_coins_corr</span><span class="op">(</span><span class="va">coin1</span>, <span class="va">coin2</span>, <span class="va">dset</span>, <span class="va">iCodes</span>, compare_by <span class="op">=</span> <span class="st">"ranks"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-coin-">coin1<a class="anchor" aria-label="anchor" href="#arg-coin-"></a></dt>
<dd><p>A coin</p></dd>


<dt id="arg-coin-">coin2<a class="anchor" aria-label="anchor" href="#arg-coin-"></a></dt>
<dd><p>A coin, with possibly alternative methodology. This should share at
least two units in common with <code>coin1</code>.</p></dd>


<dt id="arg-dset">dset<a class="anchor" aria-label="anchor" href="#arg-dset"></a></dt>
<dd><p>Target data set, must be present in both <code>coin1</code> and <code>coin2</code></p></dd>


<dt id="arg-icodes">iCodes<a class="anchor" aria-label="anchor" href="#arg-icodes"></a></dt>
<dd><p>Character vector of indicator codes to correlate between the two
coins.</p></dd>


<dt id="arg-compare-by">compare_by<a class="anchor" aria-label="anchor" href="#arg-compare-by"></a></dt>
<dd><p>Either <code>"Ranks"</code> or <code>"Scores"</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list containing a correlation table and a list of comparison data frames.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># build example</span></span></span>
<span class="r-in"><span><span class="va">coin</span> <span class="op">&lt;-</span> <span class="fu"><a href="build_example_coin.html">build_example_coin</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> iData checked and OK.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> iMeta checked and OK.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Written data set to .$Data$Raw</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Written data set to .$Data$Denominated</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Written data set to .$Data$Imputed</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Written data set to .$Data$Screened</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Written data set to .$Data$Treated</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Written data set to .$Data$Normalised</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Written data set to .$Data$Aggregated</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># copy coin</span></span></span>
<span class="r-in"><span><span class="va">coin2</span> <span class="op">&lt;-</span> <span class="va">coin</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># change to prank function (percentile ranks)</span></span></span>
<span class="r-in"><span><span class="co"># we don't need to specify any additional parameters (f_n_para) here</span></span></span>
<span class="r-in"><span><span class="va">coin2</span><span class="op">$</span><span class="va">Log</span><span class="op">$</span><span class="va">Normalise</span><span class="op">$</span><span class="va">global_specs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>f_n <span class="op">=</span> <span class="st">"n_prank"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># regenerate</span></span></span>
<span class="r-in"><span><span class="va">coin2</span> <span class="op">&lt;-</span> <span class="fu"><a href="Regen.html">Regen</a></span><span class="op">(</span><span class="va">coin2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># iCodes to compare: all at level 3 and 4</span></span></span>
<span class="r-in"><span><span class="va">iCodes</span> <span class="op">&lt;-</span> <span class="va">coin</span><span class="op">$</span><span class="va">Meta</span><span class="op">$</span><span class="va">Ind</span><span class="op">$</span><span class="va">iCode</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">coin</span><span class="op">$</span><span class="va">Meta</span><span class="op">$</span><span class="va">Ind</span><span class="op">$</span><span class="va">Level</span> <span class="op">&gt;</span> <span class="fl">2</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># compare index, sort by absolute rank difference</span></span></span>
<span class="r-in"><span><span class="va">l_comp</span> <span class="op">&lt;-</span> <span class="fu">compare_coins_corr</span><span class="op">(</span><span class="va">coin</span>, <span class="va">coin2</span>, dset <span class="op">=</span> <span class="st">"Aggregated"</span>, iCodes <span class="op">=</span> <span class="va">iCodes</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># see df</span></span></span>
<span class="r-in"><span><span class="va">l_comp</span><span class="op">$</span><span class="va">df_corr</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       iCode Correlation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Conn   Conn   0.9780995</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sust   Sust   0.9299709</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Index Index   0.9759276</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="http://www.willbecker.me" class="external-link">William Becker</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

