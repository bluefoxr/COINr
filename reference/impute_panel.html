<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Given a data frame of panel data, with a time-index column time_col and a unit ID column unit_col, imputes other
columns using the entry from the latest available time point."><title>Impute panel data — impute_panel • COINr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Impute panel data — impute_panel"><meta property="og:description" content="Given a data frame of panel data, with a time-index column time_col and a unit ID column unit_col, imputes other
columns using the entry from the latest available time point."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">COINr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.9</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/overview.html">Overview</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/v1.html">v1.0 updates</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-guides">Guides</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-guides">
    <h6 class="dropdown-header" data-toc-skip>Construction</h6>
    <a class="dropdown-item" href="../articles/coins.html">Building coins</a>
    <a class="dropdown-item" href="../articles/imputation.html">Imputation of missing data</a>
    <a class="dropdown-item" href="../articles/denomination.html">Denomination</a>
    <a class="dropdown-item" href="../articles/screening.html">Unit screening</a>
    <a class="dropdown-item" href="../articles/treat.html">Outlier treatment</a>
    <a class="dropdown-item" href="../articles/normalise.html">Normalisation</a>
    <a class="dropdown-item" href="../articles/weights.html">Weighting</a>
    <a class="dropdown-item" href="../articles/aggregate.html">Aggregation</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Post-processing</h6>
    <a class="dropdown-item" href="../articles/visualisation.html">Visualisation</a>
    <a class="dropdown-item" href="../articles/analysis.html">Statistical analysis</a>
    <a class="dropdown-item" href="../articles/results.html">Presenting results</a>
    <a class="dropdown-item" href="../articles/adjustments.html">Adjustments and comparisons</a>
    <a class="dropdown-item" href="../articles/sensitivity.html">Sensitivity analysis</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Other</h6>
    <a class="dropdown-item" href="../articles/data_selection.html">Data selection</a>
    <a class="dropdown-item" href="../articles/other_functions.html">Other functions</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/bluefoxr/COINr/">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Impute panel data</h1>
      <small class="dont-index">Source: <a href="https://github.com/bluefoxr/COINr/blob/HEAD/R/impute.R" class="external-link"><code>R/impute.R</code></a></small>
      <div class="d-none name"><code>impute_panel.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Given a data frame of panel data, with a time-index column <code>time_col</code> and a unit ID column <code>unit_col</code>, imputes other
columns using the entry from the latest available time point.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">impute_panel</span><span class="op">(</span></span>
<span>  <span class="va">iData</span>,</span>
<span>  time_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  unit_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_time <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>iData</dt>
<dd><p>A data frame of indicator data, containing a time index column <code>time_col</code>, a unit code column <code>unit_col</code>,
and other numerical columns to be imputed.</p></dd>


<dt>time_col</dt>
<dd><p>The name of a column found in <code>iData</code> to be used as the time index column. Must point to a numeric column.</p></dd>


<dt>unit_col</dt>
<dd><p>The name of a column found in <code>iData</code> to be used as the unit code/ID column. Must point to a character column.</p></dd>


<dt>cols</dt>
<dd><p>Optionally, a character vector of names of columns to impute. If <code>NULL</code> (default), all columns apart from <code>time_col</code> and
<code>unit_col</code> will be imputed where possible.</p></dd>


<dt>max_time</dt>
<dd><p>The maximum number of time points to look backwards to impute from. E.g. if <code>max_time = 1</code>, if an
<code>NA</code> is found at time \(t\), it will only look for a replacement value at \(t-1\) but not in any time points before that.
By default, searches all time points available.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list containing:</p><ul><li><p><code>.$iData_imp</code>: An <code>iData</code> format data frame with missing data imputed using previous time points (where possible).</p></li>
<li><p><code>.$DataT</code>: A data frame in the same format as <code>iData</code>, where each entry shows which time point each data point
came from.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This presumes that there are multiple observations for each unit code, i.e. one per time point. It then searches for any missing values in the target year, and replaces them with the equivalent points
from previous time points. It will replace using the most recently available point.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Copy example panel data</span></span></span>
<span class="r-in"><span><span class="va">iData_p</span> <span class="op">&lt;-</span> <span class="va">ASEM_iData_p</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># we introduce two NAs: one for NZ in 2022 in LPI indicator</span></span></span>
<span class="r-in"><span><span class="va">iData_p</span><span class="op">$</span><span class="va">LPI</span><span class="op">[</span><span class="va">iData_p</span><span class="op">$</span><span class="va">uCode</span> <span class="op">==</span> <span class="st">"NZ"</span> <span class="op">&amp;</span> <span class="va">iData_p</span><span class="op">$</span><span class="va">Time</span> <span class="op">==</span> <span class="fl">2022</span><span class="op">]</span> <span class="op">&lt;-</span>  <span class="cn">NA</span></span></span>
<span class="r-in"><span><span class="co"># one for AT, also in 2022, but for Flights indicator</span></span></span>
<span class="r-in"><span><span class="va">iData_p</span><span class="op">$</span><span class="va">Flights</span><span class="op">[</span><span class="va">iData_p</span><span class="op">$</span><span class="va">uCode</span> <span class="op">==</span> <span class="st">"AT"</span> <span class="op">&amp;</span> <span class="va">iData_p</span><span class="op">$</span><span class="va">Time</span> <span class="op">==</span> <span class="fl">2022</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># impute: target only the two columns where NAs introduced</span></span></span>
<span class="r-in"><span><span class="va">l_imp</span> <span class="op">&lt;-</span> <span class="fu">impute_panel</span><span class="op">(</span><span class="va">iData_p</span>, cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LPI"</span>, <span class="st">"Flights"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># get imputed df</span></span></span>
<span class="r-in"><span><span class="va">iData_imp</span> <span class="op">&lt;-</span> <span class="va">l_imp</span><span class="op">$</span><span class="va">iData_imp</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># check the output is what we expect: both NAs introduced should now have 2021 values</span></span></span>
<span class="r-in"><span><span class="va">iData_imp</span><span class="op">$</span><span class="va">LPI</span><span class="op">[</span><span class="va">iData_imp</span><span class="op">$</span><span class="va">uCode</span> <span class="op">==</span> <span class="st">"NZ"</span> <span class="op">&amp;</span> <span class="va">iData_imp</span><span class="op">$</span><span class="va">Time</span> <span class="op">==</span> <span class="fl">2022</span><span class="op">]</span> <span class="op">==</span></span></span>
<span class="r-in"><span>  <span class="va">ASEM_iData_p</span><span class="op">$</span><span class="va">LPI</span><span class="op">[</span><span class="va">ASEM_iData_p</span><span class="op">$</span><span class="va">uCode</span> <span class="op">==</span> <span class="st">"NZ"</span> <span class="op">&amp;</span> <span class="va">ASEM_iData_p</span><span class="op">$</span><span class="va">Time</span> <span class="op">==</span> <span class="fl">2021</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> logical(0)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">iData_imp</span><span class="op">$</span><span class="va">Flights</span><span class="op">[</span><span class="va">iData_imp</span><span class="op">$</span><span class="va">uCode</span> <span class="op">==</span> <span class="st">"AT"</span> <span class="op">&amp;</span> <span class="va">iData_imp</span><span class="op">$</span><span class="va">Time</span> <span class="op">==</span> <span class="fl">2022</span><span class="op">]</span> <span class="op">==</span></span></span>
<span class="r-in"><span>  <span class="va">ASEM_iData_p</span><span class="op">$</span><span class="va">Flights</span><span class="op">[</span><span class="va">ASEM_iData_p</span><span class="op">$</span><span class="va">uCode</span> <span class="op">==</span> <span class="st">"AT"</span> <span class="op">&amp;</span> <span class="va">ASEM_iData_p</span><span class="op">$</span><span class="va">Time</span> <span class="op">==</span> <span class="fl">2021</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> logical(0)</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="http://www.willbecker.me" class="external-link">William Becker</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

