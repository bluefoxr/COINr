<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Impute a data frame using any function, either column-wise, row-wise or by the whole data frame in one
shot."><title>Impute a data frame — Impute.data.frame • COINr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Impute a data frame — Impute.data.frame"><meta property="og:description" content="Impute a data frame using any function, either column-wise, row-wise or by the whole data frame in one
shot."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">COINr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/overview.html">Overview</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/v1.html">v1.0 updates</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-guides">Guides</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-guides">
    <h6 class="dropdown-header" data-toc-skip>Construction</h6>
    <a class="dropdown-item" href="../articles/coins.html">Building coins</a>
    <a class="dropdown-item" href="../articles/imputation.html">Imputation of missing data</a>
    <a class="dropdown-item" href="../articles/denomination.html">Denomination</a>
    <a class="dropdown-item" href="../articles/screening.html">Unit screening</a>
    <a class="dropdown-item" href="../articles/treat.html">Outlier treatment</a>
    <a class="dropdown-item" href="../articles/normalise.html">Normalisation</a>
    <a class="dropdown-item" href="../articles/weights.html">Weighting</a>
    <a class="dropdown-item" href="../articles/aggregate.html">Aggregation</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Post-processing</h6>
    <a class="dropdown-item" href="../articles/visualisation.html">Visualisation</a>
    <a class="dropdown-item" href="../articles/analysis.html">Statistical analysis</a>
    <a class="dropdown-item" href="../articles/results.html">Presenting results</a>
    <a class="dropdown-item" href="../articles/adjustments.html">Adjustments and comparisons</a>
    <a class="dropdown-item" href="../articles/sensitivity.html">Sensitivity analysis</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Other</h6>
    <a class="dropdown-item" href="../articles/data_selection.html">Data selection</a>
    <a class="dropdown-item" href="../articles/other_functions.html">Other functions</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/bluefoxr/COINr/">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Impute a data frame</h1>
      <small class="dont-index">Source: <a href="https://github.com/bluefoxr/COINr/blob/HEAD/R/impute.R" class="external-link"><code>R/impute.R</code></a></small>
      <div class="d-none name"><code>Impute.data.frame.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Impute a data frame using any function, either column-wise, row-wise or by the whole data frame in one
shot.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for data.frame</span></span>
<span><span class="fu"><a href="Impute.html">Impute</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  f_i <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  f_i_para <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  impute_by <span class="op">=</span> <span class="st">"column"</span>,</span>
<span>  normalise_first <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  directions <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>A data frame with only numeric columns.</p></dd>


<dt>f_i</dt>
<dd><p>A function to use for imputation. By default, imputation is performed by simply substituting
the mean of non-<code>NA</code> values for each column at a time.</p></dd>


<dt>f_i_para</dt>
<dd><p>Any additional parameters to pass to <code>f_i</code>, apart from <code>x</code></p></dd>


<dt>impute_by</dt>
<dd><p>Specifies how to impute: if <code>"column"</code>, passes each column separately as a numerical
vector to <code>f_i</code>; if <code>"row"</code>, passes each <em>row</em> separately; and if <code>"df"</code> passes the entire data frame to
<code>f_i</code>. The function called by <code>f_i</code> should be compatible with the type of data passed to it.</p></dd>


<dt>normalise_first</dt>
<dd><p>Logical: if <code>TRUE</code>, each column is normalised using a min-max operation before
imputation. By default this is <code>FALSE</code> unless <code>impute_by = "row"</code>. See details.</p></dd>


<dt>directions</dt>
<dd><p>A vector of directions: either -1 or 1 to indicate the direction of each column
of <code>x</code> - this is only used if <code>normalise_first = TRUE</code>. See details.</p></dd>


<dt>...</dt>
<dd><p>arguments passed to or from other methods.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An imputed data frame</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function only accepts data frames with all numeric columns. It imputes any <code>NA</code>s in the data frame
by invoking the function <code>f_i</code> and any optional arguments <code>f_i_para</code> on each column at a time (if
<code>impute_by = "column"</code>), or on each row at a time (if <code>impute_by = "row"</code>), or by passing the entire
data frame to <code>f_i</code> if <code>impute_by = "df"</code>.</p>
<p>Clearly, the function <code>f_i</code> needs to be able to accept with the data class passed to it - if
<code>impute_by</code> is <code>"row"</code> or <code>"column"</code> this will be a numeric vector, or if <code>"df"</code> it will be a data
frame. Moreover, this function should return a vector or data frame identical to the vector/data frame passed to
it except for <code>NA</code> values, which can be replaced. The function <code>f_i</code> is not required to replace <em>all</em> <code>NA</code>
values.</p>
<p>When imputing row-wise, prior normalisation of the data is recommended. This is because imputation
will use e.g. the mean of the unit values over all indicators (columns). If the indicators are on
very different scales, the result will likely make no sense. If the indicators are normalised first,
more sensible results can be obtained. There are two options to pre-normalise: first is by setting
<code>normalise_first = TRUE</code> - this is anyway the default if <code>impute_by = "row"</code>. In this case, you also
need to supply a vector of directions. The data will then be normalised using a min-max approach
before imputation, followed by the inverse operation to return the data to the original scales.</p>
<p>Another approach which gives more control is to simply run <code><a href="Normalise.html">Normalise()</a></code> first, and work with the
normalised data from that point onwards. In that case it is better to set <code>normalise_first = FALSE</code>,
since by default if <code>impute_by = "row"</code> it will be set to <code>TRUE</code>.</p>
<p>Checks are made on the format of the data returned by imputation functions, to ensure the
type and that non-<code>NA</code> values have not been inadvertently altered. This latter check is allowed
a degree of tolerance for numerical precision, controlled by the <code>sfigs</code> argument. This is because
if the data frame is normalised, and/or depending on the imputation function, there may be a very
small differences. By default <code>sfigs = 9</code>, meaning that the non-<code>NA</code> values pre and post-imputation
are compared to 9 significant figures.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># a df of random numbers</span></span></span>
<span class="r-in"><span><span class="va">X</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span>, <span class="fl">10</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># introduce NAs (2 in 3 of 5 cols)</span></span></span>
<span class="r-in"><span><span class="va">X</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span></span>
<span class="r-in"><span><span class="va">X</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span></span>
<span class="r-in"><span><span class="va">X</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fl">5</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># impute using column mean</span></span></span>
<span class="r-in"><span><span class="fu"><a href="Impute.html">Impute</a></span><span class="op">(</span><span class="va">X</span>, f_i <span class="op">=</span> <span class="st">"i_mean"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            V1        V2         V3         V4        V5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  0.09795163 0.2073644 0.99331156 0.30373246 0.8711080</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0.56775235 0.1202437 0.91686541 0.91088157 0.8417531</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  0.56908453 0.7054733 0.02444681 0.08200921 0.4555625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  0.50106287 0.3487051 0.73902261 0.62594317 0.6192093</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0.50106287 0.5039865 0.60700543 0.30112168 0.5357333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0.38057110 0.7106212 0.82144881 0.89838523 0.4875833</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  0.54727053 0.4849146 0.98671071 0.25845826 0.6192093</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  0.06681894 0.5278291 0.02969298 0.27942419 0.6836436</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  0.97683270 0.7038498 0.60700543 0.84988384 0.8779303</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 0.80222122 0.8831560 0.34454452 0.42676745 0.2003606</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># impute using row median (no normalisation)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="Impute.html">Impute</a></span><span class="op">(</span><span class="va">X</span>, f_i <span class="op">=</span> <span class="st">"i_median"</span>, impute_by <span class="op">=</span> <span class="st">"row"</span>,</span></span>
<span class="r-in"><span>       normalise_first <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            V1        V2         V3         V4        V5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  0.09795163 0.2073644 0.99331156 0.30373246 0.8711080</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0.56775235 0.1202437 0.91686541 0.91088157 0.8417531</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  0.56908453 0.7054733 0.02444681 0.08200921 0.4555625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  0.62594317 0.3487051 0.73902261 0.62594317 0.6259432</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0.50398651 0.5039865 0.50398651 0.30112168 0.5357333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0.38057110 0.7106212 0.82144881 0.89838523 0.4875833</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  0.54727053 0.4849146 0.98671071 0.25845826 0.5160926</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  0.06681894 0.5278291 0.02969298 0.27942419 0.6836436</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  0.97683270 0.7038498 0.86390707 0.84988384 0.8779303</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 0.80222122 0.8831560 0.34454452 0.42676745 0.2003606</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="http://www.willbecker.me" class="external-link">William Becker</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

